<?php

// Header
echo $this->partial('partials/common/header.phtml', array(
    'header'  => sprintf($this->translate('events.section.label.session.edit'), $this->session->getName()),
    'buttons' => array(
        $this->url('event',
            array('action' => 'edit', 'type' => 'single', 'id' => $this->session->getDay()->getEvent()->getId()),
            array('fragment' => 'days')) => $this->translate('button.back')
    )
));

// Messages
// 	echo $this->flashMessagesHelper($flashMessages);

$form    = $this->form;
$session = $form->get('session');
$form->setAttribute('action', $this->url('session', array('action' => 'edit', 'id' => $this->session->getId())));
$form->prepare();

echo $this->form()->openTag($form);

?>

    <fieldset id="general">
        <legend><?php echo $this->translate('form.legend.general'); ?></legend>
        <div class="row">
            <div class="large-6 columns">
                <?php echo $this->formRow($session->get('name')); ?>
            </div>
            <div class="large-6 columns">
                <?php echo $this->formRow($session->get('room')); ?>
            </div>
        </div>
        <div class="row">
            <div class="large-4 columns"><?php
                echo $this->formLabel($session->get('day'));
                ?><span class="prefix display"><?php echo $this->session->getDay()->getDate()
                                                                        ->format($this->translate('entity.day.date.format')); ?></span><?php
                ?></div>
            <div class="large-4 columns">
                <?php echo $this->formRow($session->get('start_time')); ?>
            </div>
            <div class="large-4 columns">
                <?php echo $this->formRow($session->get('end_time')); ?>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <?php echo $this->formRow($session->get('presenters')); ?>
            </div>
        </div>
        <div class="row">
            <div class="large-6 columns">
                <?php echo $this->formRow($session->get('level')); ?>
            </div>
            <div class="large-6 columns">
                <?php echo $this->formRow($session->get('requirements')); ?>
            </div>
        </div>
        <div class="row">
            <div class="large-6 columns"><?php
                echo $this->formRow($session->get('upload_image'));
                ?></div>
            <div class="large-6 columns"><?php
                echo $this->formHidden($session->get('image'));
                echo $this->partial('partials/common/preview.phtml',
                    array('image' => $session->get('image')->getValue()));
                if (strlen($session->get('image')->getValue())) {
                    echo $this->formRow($session->get('delete_image'));
                }
                ?></div>
        </div>
    </fieldset>

<?php

echo $this->partial('partials/common/texts.phtml', array('subject' => $session));
echo $this->partial('partials/common/associations.phtml',
    array('subject' => $session, 'entity' => $this->session, 'entityName' => 'session'));

?>

    <div class="row">
        <div class="large-12 columns">
            <ul class="button-group">
                <li><?php echo $this->formSubmit($form->get('save')); ?></li>
                <li><?php echo $this->formSubmit($form->get('saveclose')); ?></li>
            </ul>
        </div>
    </div>

<?php

/** Hidden fields **/
echo $this->formHidden($session->get('id'));
echo $this->formHidden($session->get('day'));
/** END - Hidden fields **/

echo $this->form()->closeTag($form);
?>